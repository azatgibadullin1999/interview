CC = gcc
CFLAGS = -O0 -D RAW_BITS

EXECUTABLE_FILE_FIRST = decode
EXECUTABLE_FILE_SECOND = encode

SOURCE_EXT =	.c
OBJECT_EXT =	.o
INCLUDE_EXT =

SOURCE_NAME_FIRST =	decode$(SOURCE_EXT)
SOURCE_NAME_SECOND =	encode$(SOURCE_EXT)
		
SOURCE_FILES_FIRST =	$(foreach P, $(SOURCE_NAME_FIRST), $(shell find . -name "$(P)"))
SOURCE_FILES_SECOND =	$(foreach P, $(SOURCE_NAME_SECOND), $(shell find . -name "$(P)"))

OBJECT_FILES_FIRST =	$(SOURCE_FILES_FIRST:$(SOURCE_EXT)=$(OBJECT_EXT))
OBJECT_FILES_SECOND =	$(SOURCE_FILES_SECOND:$(SOURCE_EXT)=$(OBJECT_EXT))

# INCLUDE_FILES =	$(addprefix -I,$(SOURCE_FILES:$(SOURCE_EXT)=$(INCLUDE_EXT)))

all: $(EXECUTABLE_FILE_FIRST) $(EXECUTABLE_FILE_SECOND)

$(EXECUTABLE_FILE_FIRST): $(OBJECT_FILES_FIRST)
	$(CC) -o $(EXECUTABLE_FILE_FIRST) $^

$(EXECUTABLE_FILE_SECOND): $(OBJECT_FILES_SECOND)
	$(CC) -o $(EXECUTABLE_FILE_SECOND) $^

%$(OBJECT_EXT): %$(SOURCE_EXT)
	$(CC) $(CFLAGS) $(INCLUDE_FILES) -c -o $@ $<

clean:
	rm -rf $(OBJECT_FILES_FIRST)
	rm -rf $(OBJECT_FILES_SECOND)

fclean: clean
	rm -rf $(EXECUTABLE_FILE_FIRST)
	rm -rf $(EXECUTABLE_FILE_SECOND)

re: fclean all